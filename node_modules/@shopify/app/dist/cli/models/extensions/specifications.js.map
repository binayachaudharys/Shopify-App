{"version":3,"file":"specifications.js","sourceRoot":"","sources":["../../../../src/cli/models/extensions/specifications.ts"],"names":[],"mappings":"AAGA,OAAO,EAAC,EAAE,EAAE,IAAI,EAAC,MAAM,kBAAkB,CAAA;AACzC,OAAO,EAAC,OAAO,EAAC,MAAM,WAAW,CAAA;AACjC,OAAO,EAAC,aAAa,EAAC,MAAM,KAAK,CAAA;AAEjC,MAAM,CAAC,KAAK,UAAU,mBAAmB;IACvC,OAAO,YAAY,CAAC,mBAAmB,CAAC,CAAA;AAC1C,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,yBAAyB;IAC7C,OAAO,YAAY,CAAC,yBAAyB,CAAC,CAAA;AAChD,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,sBAAsB;IAC1C,OAAO,YAAY,CAAC,sBAAsB,CAAC,CAAA;AAC7C,CAAC;AAED,MAAM,YAAY,GAAG,OAAO,CAAC,SAAS,CAAC,CAAA;AAEvC,KAAK,UAAU,SAAS,CAAC,aAAqB;IAC5C,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC,CAAA;IAC1G,IAAI,KAAK,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,MAAM,EAAE,CAAC,SAAS,EAAE,YAAY,CAAC,EAAC,CAAC,CAAA;IAErE,0DAA0D;IAC1D,MAAM,EAAC,QAAQ,EAAC,GAAG,EAAE,CAAC,eAAe,EAAE,CAAA;IACvC,IAAI,QAAQ,KAAK,SAAS,EAAE;QAC1B,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,CAAA;KAC9C;IAED,MAAM,QAAQ,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA;IAClD,MAAM,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;IAC3C,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;IACrD,OAAO,KAAK,CAAA;AACd,CAAC","sourcesContent":["import {UIExtensionSpec} from './ui.js'\nimport {FunctionSpec} from './functions.js'\nimport {ThemeExtensionSpec} from './theme.js'\nimport {os, path} from '@shopify/cli-kit'\nimport {memoize} from 'lodash-es'\nimport {fileURLToPath} from 'url'\n\nexport async function allUISpecifications(): Promise<UIExtensionSpec[]> {\n  return memLoadSpecs('ui-specifications')\n}\n\nexport async function allFunctionSpecifications(): Promise<FunctionSpec[]> {\n  return memLoadSpecs('function-specifications')\n}\n\nexport async function allThemeSpecifications(): Promise<ThemeExtensionSpec[]> {\n  return memLoadSpecs('theme-specifications')\n}\n\nconst memLoadSpecs = memoize(loadSpecs)\n\nasync function loadSpecs(directoryName: string) {\n  const url = path.join(path.dirname(fileURLToPath(import.meta.url)), path.join(directoryName, '*.{js,ts}'))\n  let files = await path.glob(url, {ignore: ['**.d.ts', '**.test.ts']})\n\n  // From Node 18, all windows paths must start with file://\n  const {platform} = os.platformAndArch()\n  if (platform === 'windows') {\n    files = files.map((file) => `file://${file}`)\n  }\n\n  const promises = files.map((file) => import(file))\n  const modules = await Promise.all(promises)\n  const specs = modules.map((module) => module.default)\n  return specs\n}\n"]}