{"version":3,"file":"fetch-product-variant.js","sourceRoot":"","sources":["../../../../src/cli/utilities/extensions/fetch-product-variant.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,GAAG,EAAE,KAAK,EAAE,OAAO,EAAC,MAAM,kBAAkB,CAAA;AAEpD;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,mBAAmB,CAAC,KAAa;IACrD,MAAM,YAAY,GAAG,MAAM,OAAO,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAA;IAClE,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,uBAAuB,CAAA;IACjD,MAAM,MAAM,GAAyC,MAAM,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;IACjG,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAA;IACtC,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC;QACvB,MAAM,IAAI,KAAK,CAAC,KAAK,CACnB,kCAAkC,EAClC;0CACoC,KAAK,qBAAqB,CAC/D,CAAA;IACH,MAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,EAAE,CAAA;IAC5E,MAAM,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAA;IAC7C,OAAO,SAAS,CAAA;AAClB,CAAC","sourcesContent":["import {api, error, session} from '@shopify/cli-kit'\n\n/**\n * Retrieve the first variant of the first product of the given store\n * @param store - Store FQDN\n * @returns variantID if exists\n */\nexport async function fetchProductVariant(store: string) {\n  const adminSession = await session.ensureAuthenticatedAdmin(store)\n  const query = api.graphql.FindProductVariantQuery\n  const result: api.graphql.FindProductVariantSchema = await api.admin.request(query, adminSession)\n  const products = result.products.edges\n  if (products.length === 0)\n    throw new error.Abort(\n      'Could not find a product variant',\n      `Your store needs to have at least one product to test a 'checktout_ui' extension\\n\nYou can add a new product here: https://${store}/admin/products/new`,\n    )\n  const variantURL = result.products.edges[0]!.node.variants.edges[0]!.node.id\n  const variantId = variantURL.split('/').pop()\n  return variantId\n}\n"]}