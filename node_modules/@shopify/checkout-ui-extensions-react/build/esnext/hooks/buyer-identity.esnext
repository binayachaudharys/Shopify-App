import { ScopeNotGrantedError } from '../errors';
import { useExtensionApi } from './api';
import { useSubscription } from './subscription';
/**
 * Returns the account belonging to the customer.
 *
 * The value is `undefined` if the customer doesn’t have
 * an account or if they aren’t logged in.
 */

export function useCustomer() {
  const buyerIdentity = useExtensionApi().buyerIdentity;

  if (!buyerIdentity) {
    throw new ScopeNotGrantedError('Using buyer identity requires having personal customer data permissions granted to your app.');
  }

  return useSubscription(buyerIdentity.customer);
}