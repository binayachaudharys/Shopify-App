"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useCustomer = useCustomer;

var _errors = require("../errors");

var _api = require("./api");

var _subscription = require("./subscription");

/**
 * Returns the account belonging to the customer.
 *
 * The value is `undefined` if the customer doesn’t have
 * an account or if they aren’t logged in.
 */
function useCustomer() {
  const buyerIdentity = (0, _api.useExtensionApi)().buyerIdentity;

  if (!buyerIdentity) {
    throw new _errors.ScopeNotGrantedError('Using buyer identity requires having personal customer data permissions granted to your app.');
  }

  return (0, _subscription.useSubscription)(buyerIdentity.customer);
}