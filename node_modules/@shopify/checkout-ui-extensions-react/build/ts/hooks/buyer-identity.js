"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useCustomer = void 0;
const errors_1 = require("../errors");
const api_1 = require("./api");
const subscription_1 = require("./subscription");
/**
 * Returns the account belonging to the customer.
 *
 * The value is `undefined` if the customer doesn’t have
 * an account or if they aren’t logged in.
 */
function useCustomer() {
    const buyerIdentity = (0, api_1.useExtensionApi)().buyerIdentity;
    if (!buyerIdentity) {
        throw new errors_1.ScopeNotGrantedError('Using buyer identity requires having personal customer data permissions granted to your app.');
    }
    return (0, subscription_1.useSubscription)(buyerIdentity.customer);
}
exports.useCustomer = useCustomer;
